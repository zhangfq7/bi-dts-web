define(["cookie","nicescroll"],function(b){function f(){var A=navigator.userAgent,j=/(msie\s|trident.*rv:)([\w.]+)/,w=/(firefox)\/([\w.]+)/,k=/(opera).+version\/([\w.]+)/,s=/(chrome)\/([\w.]+)/,r=/version\/([\w.]+).*(safari)/,l=/ipad/,q=/iphone os/,m=/midp/,u=/rv:1.2.3.4/,t=/ucweb/,o=/android/,n=/windows ce/,v=/windows mobile/;var z=0,p=0;function y(C){var B=l.exec(C);if(B!=null){return{browser:"IPAD",version:B[2]||"0"}}var B=o.exec(C);if(B!=null){return{browser:"ANDROID",version:B}}var B=q.exec(C);if(B!=null){return{browser:"IPHONE",version:B}}var B=t.exec(C);if(B!=null){return{browser:"UC",version:B}}var B=v.exec(C);if(B!=null){return{browser:"WINDOWSMOBILE",version:B}}var B=j.exec(C);if(B!=null){return{browser:"IE",version:B[2]||"0"}}var B=w.exec(C);if(B!=null){return{browser:B[1]||"",version:B[2]||"0"}}var B=k.exec(C);if(B!=null){return{browser:B[1]||"",version:B[2]||"0"}}var B=s.exec(C);if(B!=null){return{browser:B[1]||"",version:B[2]||"0"}}var B=r.exec(C);if(B!=null){return{browser:B[2]||"",version:B[1]||"0"}}if(B!=null){return{browser:"",version:"0"}}}var x=y(A.toLowerCase());if(x.browser){z=x.browser;p=x.version}return{type:z.toLowerCase(),version:p}}function c(j){if(j&&j.stopPropagation){j.stopPropagation()}else{window.event.cancelBubble=true}}function a(j){if(j==null||j=="null"||j=="undefined"||j=="NaN"||j==""||j==undefined){return true}return false}(function(j){j.fn.extend({arrayAttr:function(l,n){var m=j(this);var k=[];if(m.length>0){m.each(function(p,q){if(n=="prop"){k.push(j(q).prop(l))}else{k.push(j(q).attr(l||"value"))}})}return k},outerHTML:function(){return j(this).prop("outerHTML")}})})(jQuery);window.log=window.log||function(){if(!typeof(logmode)&&logmode=="product"){return}var j=window.console||{log:function(){}};for(var k=0,l=arguments.length;k<l;k++){j.log(arguments[k])}};function g(l,j){if(l.getNiceScroll().length==0){var k=$.extend(true,{},{cursorcolor:"#D4D4D4",cursorborder:"none",preservenativescrolling:false},j);l.niceScroll(k)}else{setTimeout(function(){l.getNiceScroll().resize()},100)}}Date.prototype.format=function(j){var m={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(Y+)/.test(j)){j=j.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var l in m){if(new RegExp("("+l+")").test(j)){j=j.replace(RegExp.$1,(RegExp.$1.length==1)?(m[l]):(("00"+m[l]).substr((""+m[l]).length)))}}return j};String.prototype.replaceAll=function(k,j){return this.replace(new RegExp(k,"gm"),j)};String.prototype.startWith=function(k){var j=new RegExp("^"+k);return j.test(this)};function h(k){if(k.indexOf(webpath)!=0){k=webpath+k}var m=k.indexOf("funcId=");if(m>-1){var l="";var j=k.substring(m+7).indexOf("&");if(j>-1){l=m.substring(m+7,m+j+7);k=k.substring(0,m)+"/"+l.toLowerCase()+k.substring(m+j+8)}else{l=k.substring(m+7);k=k.substring(0,m)+"/"+l.toLowerCase()}}else{if(!a(funcId)){k=k+"/"+funcId.toLowerCase()}}return k}var d=function(){var n="\\{\\{",l="\\}\\}";var k=n+"(.+?)"+l;var j=new RegExp(k,"mg");function m(q,o){var p=q.replace(j,function(s,r){return o[r]||""});return p}return function(p,o){if(!p){return""}else{if(p&&arguments.length==1){return p}else{if(arguments.length>=2&&((typeof o)=="string")){o=Array.prototype.splice.call(arguments,1);return m(p,o)}else{return m(p,o)}}}}}();var e=(function(){function j(l){var k=/_(\w)/g;return l.replace(k,function(){var m=arguments;return m[1].toUpperCase()})}return function(m){var k={};for(var l in m){k[j(l)]=m[l]}return k}})();function i(j){var r=document.body;var t=$("#resultFrm");if(t[0]){t.remove()}t=$("<iframe/>",{id:"resultFrm",name:"resultFrm",style:"display:none;"}).appendTo($(r));t.on("load",function(p){var v=t[0].contentDocument||t[0].contentWindow.document;var u=v.body.innerHTML;if(u){window.top.$.dialog({title:"下载错误",lock:true,resize:false,width:700,height:100,padding:"0px 0px",content:'<span class="error_message">文件下载时发生错误,请联系管理员!</span>',cancel:function(){}})}});var o=$("#downLoadForm");if(o[0]){o.remove()}o=$("<form/>",{id:"downLoadForm",name:"downLoadForm",style:"display:none;",method:"post",target:"resultFrm"});var n=j.indexOf("?");o.attr("action",j.substr(0,n));if(n>-1){var m=j.substr(n+1);var q=m.split("&");for(n in q){var k=q[n].split("=");var l=$("<input/>",{id:k[0],name:k[0]});for(var s=1;s<k.length;s++){if(s>1){l[0].value+="="}l[0].value+=k[s]}o.append(l)}}$(r).append(o);o.submit()}return{getBV:f,stopBubble:c,IsEmpty:a,handleUrlParam:h,autoScroll:g,buildString:d,coverObj2Camel:e,downloadbyfloor:i}});