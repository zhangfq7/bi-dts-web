(function(){var a=null;UM.registerWidget("formula",{tpl:'<link type="text/css" rel="stylesheet" href="<%=formula_url%>formula.css"><div class="edui-formula-wrapper"><ul class="edui-tab-nav"></ul><div class="edui-tab-content"></div></div>',sourceData:{formula:{common:["{/}frac{ }{ }","^{ }/_{ }","x^{ }","x_{ }","x^{ }_{ }","{/}bar{ }","{/}sqrt{ }","{/}nthroot{ }{ }","{/}sum^{ }_{n=}","{/}sum","{/}log_{ }","{/}ln","{/}int_{ }^{ }","{/}oint_{ }^{ }"],symbol:["+","-","{/}pm","{/}times","{/}ast","{/}div","/","{/}bigtriangleup","=","{/}ne","{/}approx",">","<","{/}ge","{/}le","{/}infty","{/}cap","{/}cup","{/}because","{/}therefore","{/}subset","{/}supset","{/}subseteq","{/}supseteq","{/}nsubseteq","{/}nsupseteq","{/}in","{/}ni","{/}notin","{/}mapsto","{/}leftarrow","{/}rightarrow","{/}Leftarrow","{/}Rightarrow","{/}leftrightarrow","{/}Leftrightarrow"],letter:["{/}alpha","{/}beta","{/}gamma","{/}delta","{/}varepsilon","{/}varphi","{/}lambda","{/}mu","{/}rho","{/}sigma","{/}omega","{/}Gamma","{/}Delta","{/}Theta","{/}Lambda","{/}Xi","{/}Pi","{/}Sigma","{/}Upsilon","{/}Phi","{/}Psi","{/}Omega"]}},initContent:function(c,b){var h=this;var g=h.sourceData.formula;var d=c.getLang("formula")["static"];var k=UMEDITOR_CONFIG.UMEDITOR_HOME_URL+"dialogs/formula/";var m=$.extend({},d,{formula_url:k});var i=h.root();if(h.inited){h.preventDefault();return}h.inited=true;a=c;h.$widget=b;$root.html($.parseTmpl(h.tpl,m));h.tabs=$.eduitab({selector:"#edui-formula-tab-Jpanel"});var l=[],f=0,e=0,j=h.root().find(".edui-tab-content");$.each(g,function(o,n){var p=[];$.each(n,function(q,r){p.push('<li class="edui-formula-latex-item" data-latex="'+r+'" style="background-position:-'+(f*30)+"px -"+(e*30)+'px"></li>');if(++f>=8){++e;f=0}});e++;f=0;j.append('<div class="edui-tab-pane"><ul>'+p.join("")+"</ul>");l.push('<li class="edui-tab-item"><a href="javascript:void(0);" class="edui-tab-text">'+d["lang_tab_"+o]+"</a></li>")});l.push('<li class="edui-formula-clearboth"></li>');$root.find(".edui-tab-nav").html(l.join(""));$root.find(".edui-tab-content").append('<div class="edui-formula-clearboth"></div>');h.switchTab(0)},initEvent:function(){var b=this;b.root().on("click",function(c){return false});b.root().find(".edui-tab-nav").delegate(".edui-tab-item","click",function(c){b.switchTab(this);return false});b.root().find(".edui-tab-pane").delegate(".edui-formula-latex-item","click",function(c){var d=$(this),e=d.attr("data-latex")||"";if(e){b.insertLatex(e.replace("{/}","\\"))}b.$widget.edui().hide();return false})},switchTab:function(b){var c=this,d=c.root(),b=$.isNumeric(b)?b:$.inArray(b,d.find(".edui-tab-nav .edui-tab-item"));d.find(".edui-tab-nav .edui-tab-item").removeClass("edui-active").eq(b).addClass("edui-active");d.find(".edui-tab-content .edui-tab-pane").removeClass("edui-active").eq(b).addClass("edui-active");c.autoHeight(0)},autoHeight:function(){this.$widget.height(this.root()+2)},insertLatex:function(b){a.execCommand("formula",b)},width:350,height:400})})();