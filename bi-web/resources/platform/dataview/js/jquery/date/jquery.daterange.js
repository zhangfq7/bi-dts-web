/*!
 * 
 * @author zhump
bootstrap-datetimepicker extend
By jQuery 1.4+

Version 1.0.0
If you have questions, please email me at 695004175@qq.com
*/
(function(){var a={init:function(){var l={startValue:"",endValue:"",start:{},end:{},changeStart:function(){},changeEnd:function(){},onhide:function(){}};l=$.extend(true,{},l,arguments[0]);var q='<div class="inputGroup"><input class="data-input  date-start-input" readonly placeholder="起始时间"/><input class="data-input  date-end-input" readonly placeholder="结束时间"/><div class="date-button primary"><span>确定</span></div> <div class="date-button rest"><span>清空</span></div></div><div class="dataGroup"><div class="date-start"></div><div class="date-end"></div></div>';var o=l.format||"YYYY-MM-DD";var b=o.match(/hh|HH|mm|ms|ss/g)?"350px":"320px";var p="range"+new Date().getTime();var n=jQuery("<div></div>",{"class":"bi-daterange  bootstrap-datetimepicker-widget  dropdown-menu",style:"display:none;width:550px;height:"+b+";top:35px",id:p}).append(q);var i=$(this);i.prop("readonly",true).after(n);var e=n.find(".date-start");var m=n.find(".date-end");var j=$.extend(true,{useCurrent:false,inline:true,format:o},l.start);e.datetimepicker(j);var h=$.extend(true,{useCurrent:false,inline:true,format:o},l.end);m.datetimepicker(h);var s=n.find("input.date-start-input");var g=n.find("input.date-end-input");var c=l.startValue||moment().format(o);var d=l.endValue||moment().format(o);if(o.indexOf("d")>-1||o.indexOf("D")>-1){d=moment(d,o).add(1,"month").format(o)}s.val(c);g.val(d);i.data("startDate",c);i.data("endDate",d);e.data("DateTimePicker").date(c);m.data("DateTimePicker").date(d);e.on("dp.change",function(w){var v=jQuery(this).data("DateTimePicker").format();var x=w.date.format("x");var u=moment(i.data("endDate"),v).format("x");l.changeStart(w,i.data("endDate"),m.data("DateTimePicker"),e.data("DateTimePicker"));if(x>u){m.data("DateTimePicker").date(w.date);i.data("endDate",w.date.format(v))}s.val(w.date.format(v));i.data("startDate",w.date.format(v))});m.on("dp.change",function(w){var v=jQuery(this).data("DateTimePicker").format();var u=w.date.format("x");var x=moment(i.data("startDate"),v).format("x");if(x>u){e.data("DateTimePicker").date(w.date);i.data("startDate",w.date.format(v))}g.val(w.date.format(v));i.data("endDate",w.date.format(v));l.changeEnd(e.data("DateTimePicker"),w)});i.on("focus",function(){setTimeout(function(){k()},0)});n.on("click",".primary",function(u){t()});n.on("click",".rest",function(){i.val("");s.val("");g.val("");i.data("startDate","");i.data("endDate","")});function r(){var u=s.val();var w=g.val();var v="";if(u==w){v=u}else{v=u+"   ~   "+w}if(u&&w){i.val(v);i.data("startDate",u);i.data("endDate",w)}else{i.val("")}}function k(){n.show();$("body").on("mousedown",f)}function t(){if(!$("#"+p).is(":hidden")){r();$("#"+p).fadeOut("fast",function(){l.onhide.call(i)})}}function f(u){if(!(u.target.id==i.attr("id")||u.target.id==p||$(u.target).parents("#"+p).length>0)){t();u.stopImmediatePropagation()}}this.data("rangeId",p);return this},getDate:function(){var b=$(this).data();return{startDate:b.startDate||"",endDate:b.endDate||""}},destroy:function(){}};$.fn.dateRange=function(){var b=arguments[0];if(a[b]){b=a[b];arguments=Array.prototype.slice.call(arguments,1)}else{if(typeof(b)=="object"||!b){b=a.init}else{console.error("Method "+b+" does not exist on jQuery.bzTree");return this}}return b.apply(this,arguments)}})(jQuery);