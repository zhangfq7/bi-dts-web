define(["bace","dialog"],function(c){var b={};var a=null;var d={};var f=null;d.module={};d.control={show:function(g){f=g;if(!jQuery("#openApiGridPanel")[0]){jQuery("body").append("<div id='openApiGridPanel' style='display:none;position: relative'></div>")}jQuery("#openApiGridPanel").load(c.handleUrlParam("/platform/dataview/openapi-grid"),function(){e();d.view.show()})}};d.view={show:function(){$.dialog({id:"openApiGridDialog",title:"选择openApi",padding:"0",width:"auto",height:"auto",lock:true,content:jQuery("#openApiGridPanel")[0],cancelVal:"取消",cancel:function(){return true}})}};function e(){jQuery("#openApiList").jqGrid({url:c.handleUrlParam("/platform/openapi/query-openapi-list"),data:{ApiCode:""},styleUI:"Bootstrap",datatype:"json",colModel:[{label:"接口名称",name:"apiName",width:100,align:"left",sortable:false},{label:"方法名称",name:"apiCode",width:100,align:"left",sortable:false},{label:"请求地址",name:"apiUrl",width:200,align:"left",sortable:false},{label:"请求字段",name:"paramInfoStr",width:200,align:"left",sortable:false},{label:"结果字段",name:"resultInfoStr",width:200,align:"left",sortable:false},{label:"操作",name:"serviceApiId",width:50,align:"center",sortable:false,formatter:function(g,h,i){return'<a href="javascript:void(0)" data-rowid="'+h.rowId+'" class="use-openapi">引用</a>'}}],width:"auto",height:"auto",rowNum:100000,regional:"cn",loadComplete:function(g){jQuery(".use-openapi").on("click",function(){var h=$(this).data("rowid")-1;var i=g[h];var j=i.paramInfoStr;b.apiName=i.apiName;b.apiCode=i.apiCode;b.apiUrl=i.apiUrl;b.clientId=i.clientId;b.passWord=i.passWord;b.resultInfoStr=i.resultInfoStr;b.reqSystem=i.sysId;b.isDes=i.isDes;b.accessKey=i.accessKey;$.dialog.closeAll("openApiGridDialog");f.call(this,b,j)})}})}return d.control});