define(["sabace","dialog","retrievepsd/message"],function(c,b,d){jQuery(function(){a();jQuery("#cgpsd-next").on("click",e)});function a(){var f=jQuery("#psdLevel").attr("value")-1;$("#psdLevel>div:eq("+f+")").removeClass("tipdisplay")}function e(){var f=jQuery("#newPassword").val();var g=jQuery("#renewPassword").val();if(c.IsEmpty(f)){bi.dialog.show({type:"type-warning",title:c.getMessage("retripsd.msg.prompt"),message:c.getMessage("retripsd.msg.inputPassword"),});jQuery("#newPassword").focus();return}else{if(f.length<6){bi.dialog.show({type:"type-warning",title:c.getMessage("retripsd.msg.prompt"),message:c.getMessage("retripsd.msg.shortPassword"),});jQuery("#newPassword").focus();return}}if(c.IsEmpty(g)){bi.dialog.show({type:"type-warning",title:c.getMessage("retripsd.msg.prompt"),message:c.getMessage("retripsd.msg.inputRepassword"),});jQuery("#userId").focus();return}else{if(f!=g){bi.dialog.show({type:"type-warning",title:c.getMessage("retripsd.msg.prompt"),message:c.getMessage("retripsd.msg.diffPassword"),});jQuery("#rePassword").focus();return}}c.ajax({type:"post",cache:false,dataType:"json",url:c.handleUrlParam("/platform/retripsd/change-password"),data:{password:f,},success:function(h){if(!h.validateFlag){if(h.noCache){document.location.href=c.handleUrlParam("/platform/retripsd/enter-page")}bi.dialog.show({type:"type-warning",title:c.getMessage("retripsd.msg.prompt"),message:c.getMessage(h.errorMsg),})}else{document.location.href=c.handleUrlParam("/platform/retripsd/finish")}},})}});