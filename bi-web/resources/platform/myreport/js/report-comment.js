define(["sabace","chosen"],function(A,Z,R){var L={};var p=1;var F=15;var h=0;var o=false;jQuery(function(){jQuery("#reportId").val(reportId);t();jQuery(".chosen-select").chosen();jQuery(".my-comment").on("click","#myStar span",E);jQuery("#commentContent").on("focus",n);jQuery("#commentSubmit").on("click",v);jQuery("#delComment").on("click",T);jQuery("#editComment").on("click",r);jQuery(".commemt-list").on("click","#commentList #listContentLike",c);jQuery("#radioSelect div").on("click",J);jQuery("#radioSelect div").on("click",B);jQuery("#orderSelect").on("change",I);jQuery("#commentEditCancel").on("click",e);jQuery("#commentEditSubmit").on("click",y);jQuery("#comment").on("click",U);jQuery(".commemt-list").on("click","#commentList #listReplyComment",H);jQuery(".my-tools").on("click","#replyBtn",S);jQuery("#commentList").on("click","#replyBtn",l);jQuery(".my-tools").on("click","#appendComment",D);jQuery(".commemt-list").on("click","#appendComment",V);jQuery(".my-tools").on("click","#myReplyBtn",b);jQuery("#commentList").on("click","#myReplyBtn",W);jQuery(".main-comment-panel").on("click","#delAppComment",j);x();jQuery("#moreComment").on("click",k);C()});function x(){jQuery(".my-tools").on("mouseover mouseout",".append-comment",function(af){if(af.type=="mouseover"){var ad=jQuery("#curUserId").val();var ae=jQuery(this).find("#appendUserId").text();if(ad==ae){jQuery(this).find("#delAppComment").removeClass("hide")}}else{if(af.type=="mouseout"){jQuery(this).find("#delAppComment").addClass("hide")}}});jQuery(".commemt-list").on("mouseover mouseout","#commentList .append-comment",function(af){if(af.type=="mouseover"){var ad=jQuery("#curUserId").val();var ae=jQuery(this).find("#appendUserId").text();if(ad==ae){jQuery(this).find("#delAppComment").removeClass("hide")}}else{if(af.type=="mouseout"){jQuery(this).find("#delAppComment").addClass("hide")}}})}function C(){jQuery(".my-comment").on("mouseover","#myStar span",function(){var ae=jQuery(this).attr("id");var ad=null;jQuery("#myStar span").each(function(){if(jQuery(this).hasClass("red-star")){jQuery(this).removeClass("red-star");jQuery(this).addClass("white-star")}ad=jQuery(this).attr("id");if(ad<=ae){jQuery(this).removeClass("white-star");jQuery(this).addClass("red-star")}})});jQuery("#myStar").hover(null,function(){var ad=null;jQuery("#myStar span").each(function(){if(typeof(L.score)=="undefined"||L.score==""||L.score==0){if(jQuery(this).hasClass("red-star")){jQuery(this).removeClass("red-star");jQuery(this).addClass("white-star")}}else{ad=jQuery(this).attr("id");if(ad<=L.score){jQuery(this).removeClass("white-star");jQuery(this).addClass("red-star")}else{jQuery(this).removeClass("red-star");jQuery(this).addClass("white-star")}}})})}function t(){jQuery(".commemt-list .list-load").toggle();h=0;p=1;A.ajax({url:A.handleUrlParam("/platform/myreport/comment/comment-query-list"),data:{reportId:reportId,pageNum:p,pageSize:F},success:function(ad){jQuery(".commemt-list .list-load").toggle();if(ad.resFlag=="success"){aa();Y(ad.curUserComment);jQuery("#curUserId").val(ad.curUserId);if(ad.commentList.total>0){if(ad.commentList.totalPages>1){jQuery("#moreComment").removeClass("hide")}q(ad.commentList.rows,ad.starCounts)}else{m()}N()}else{Y(null);m();return false}},error:function(ad){jQuery(".commemt-list .list-load").toggle();Y(null);m();return false}})}function Y(af){if(af!=null){jQuery("#commentId").val(af.commentId);jQuery("#userId").val(af.commentUser);jQuery("#userName").val(af.commentUserName);var ae=z(af.score);L.score=af.score;jQuery("#myStar").append(ae);jQuery("#commentContent").removeClass("hide").html(af.commentContent).removeClass("comment-content");jQuery("#commentContent").addClass("comment-content-show");jQuery("#contentTime").html(af.commentTime);jQuery(".my-tools").removeClass("hide");jQuery("#likeCount").html(af.likeCount);var ad=af.appendList;O(ad)}else{var ae=z(0);jQuery("#myStar").append(ae);jQuery("#commentSubmit").removeClass("hide");jQuery("#commentContent").removeClass("hide");jQuery("#commentContent").prop("contenteditable",true)}}function m(){jQuery("#commentList").removeClass("hide");jQuery("#commentList").empty();var ad='<div class="zero-comment">空空如也~  还不快来坐沙发~</div>';jQuery("#commentList").append(ad)}function i(){jQuery("#commentList").removeClass("hide");jQuery("#commentList").empty();var ad='<div class="zero-comment">没有符合条件的评论~</div>';jQuery("#commentList").append(ad)}function z(af){var ae="";for(var ad=1;ad<6;ad++){if(af==0){ae+='<span id="'+ad+'" class="white-star"></span>'}else{if(af>=ad){ae+='<span id="'+ad+'" class="red-star"></span>'}else{ae+='<span id="'+ad+'" class="white-star"></span>'}}}return ae}function E(){L.score=jQuery(this).attr("id")}function ab(ag){var ah=0;var ad=ag.length;var ae=-1;for(var af=0;af<ad;af++){ae=ag.charCodeAt(af);if(ae>=0&&ae<=128){ah+=1}else{ah+=3}}return ah}function v(){if(L.score==null){u({title:"提示",content:"请设置评分!"});return false}L.commentContent=jQuery.trim(jQuery("#commentContent").text());if(L.commentContent==""||L.commentContent=="写下评价吧..."){u({title:"提示",content:"请输入评价!"});return false}var ag=ab(L.commentContent);if(ag>900){u({title:"提示",content:"您输入的评价长度不能超过900位,一个中文占3位!"});return false}L.reportId=jQuery("#reportId").val();var ae=jQuery("#orderSelect").val();var ad=jQuery("#radioSelect .checked").attr("id");var af={reportId:L.reportId,commentContent:L.commentContent,score:L.score,orderVal:ae,scoreValue:ad};jQuery(".my-comment .add-load").toggle();jQuery("#commentSubmit").css("background-color","#bdc3c7");A.ajax({url:A.handleUrlParam("/platform/myreport/comment/report-comment-save"),data:af,success:function(ah){jQuery(".my-comment .add-load").toggle();jQuery("#commentSubmit").css("background-color","#027EBE");if(ah.resFlag=="success"){aa();K(ah.reportCommentBean);if(ah.commentList.totalPages>1){jQuery("#moreComment").removeClass("hide")}q(ah.commentList.rows,ah.starCounts);N()}else{return false}},error:function(ah){jQuery(".my-comment .add-load").toggle();jQuery("#commentSubmit").css("background-color","#027EBE");return false}})}function K(ad){jQuery("#commentId").val(ad.commentId);jQuery("#userId").val(ad.commentUser);jQuery("#userName").val(ad.commentUserName);jQuery("#commentSubmit").addClass("hide");jQuery("#commentContent").removeClass("hide").html(ad.commentContent).removeClass("comment-content");jQuery("#commentContent").addClass("comment-content-show");jQuery("#contentTime").html(ad.commentTime);jQuery(".my-tools").removeClass("hide");jQuery("#likeCount").html(ad.likeCount);jQuery("#commentContent").prop("contenteditable",false)}function T(){f({title:"提示",content:"您确定需要删除此评论?"},function(){var af=jQuery("#commentId").val();var ae=jQuery("#orderSelect").val();var ad=jQuery("#radioSelect .checked").attr("id");jQuery(".commemt-list .list-load").toggle();A.ajax({url:A.handleUrlParam("/platform/myreport/comment/report-comment-del"),data:{commentId:af,reportId:reportId,orderVal:ae,scoreValue:ad},success:function(ag){jQuery(".commemt-list .list-load").toggle();if(ag.resFlag=="success"){aa();G();if(ag.commentList.total>0){if(ag.commentList.totalPages>1){jQuery("#moreComment").removeClass("hide")}q(ag.commentList.rows,ag.starCounts)}else{jQuery("#allStarCount").text(ag.starCounts.allStarCount);jQuery("#fiveStarCount").text(ag.starCounts.fiveStarCount);jQuery("#fourStarCount").text(ag.starCounts.fourStarCount);jQuery("#threeStarCount").text(ag.starCounts.threeStarCount);jQuery("#twoStarCount").text(ag.starCounts.twoStarCount);jQuery("#oneStarCount").text(ag.starCounts.oneStarCount);jQuery("#commentList").removeClass("hide");jQuery("#commentList").empty();if(ag.starCounts.allStarCount==0){m()}else{i()}}N()}else{jQuery(".commemt-list .list-load").toggle();return false}},error:function(ag){jQuery(".commemt-list .list-load").toggle();return false}})})}function G(){jQuery("#myStar span").each(function(){if(jQuery(this).hasClass("red-star")){jQuery(this).removeClass("red-star");jQuery(this).addClass("white-star")}});jQuery("#commentSubmit").removeClass("hide");jQuery("#commentContent").html("写下评价吧...").removeClass("comment-content-show").addClass("comment-content").css("color"," #919191");jQuery(".my-tools").addClass("hide");jQuery("#commentContent").removeClass("not-clearTip");jQuery("#commentContent").prop("contenteditable",true);jQuery(".my-tools .append-comment").remove()}function r(){jQuery(".reply-comment").remove();jQuery("#commentContent").removeClass("comment-content-show").addClass("comment-content");jQuery(".my-tools").addClass("hide");jQuery(".my-tools-edit").removeClass("hide");jQuery("#commentContent").addClass("not-clearTip");jQuery("#commentContent").prop("contenteditable",true)}function e(){var ad=jQuery("#commentId").val();jQuery(".my-comment .cancel-load").toggle();A.ajax({url:A.handleUrlParam("/platform/myreport/comment/comment-info"),data:{commentId:ad},success:function(ae){jQuery(".my-comment .cancel-load").toggle();if(ae.resFlag=="success"){a(ae.comment)}else{return false}},error:function(ae){jQuery(".my-comment .cancel-load").toggle();return false}})}function a(af){jQuery(".my-tools-edit").addClass("hide");L.score=af.score;var ae=af.commentContent;jQuery("#commentContent").removeClass("hide").html(ae).removeClass("comment-content");jQuery("#commentContent").addClass("comment-content-show");jQuery(".my-tools").removeClass("hide");var ad=af.likeCount;jQuery("#likeCount").html(ad);jQuery("#commentContent").prop("contenteditable",false)}function y(){var ag=jQuery("#commentId").val();var ah=jQuery("#commentContent").text();if(ah==""){u({title:"提示",content:"请输入评价!"});return false}var ai=ab(ah);if(ai>900){u({title:"提示",content:"您输入的评价长度不能超过900位,一个中文占3位!"});return false}var ae=jQuery("#orderSelect").val();var ad=jQuery("#radioSelect .checked").attr("id");var af=jQuery("#reportId").val();jQuery(".my-comment .edit-load").toggle();jQuery("#commentEditSubmit").css("background-color","#bdc3c7");A.ajax({url:A.handleUrlParam("/platform/myreport/comment/comment-edit-save"),data:{reportId:af,commentId:ag,score:L.score,commentContent:ah,orderVal:ae,scoreValue:ad},success:function(aj){jQuery("#commentEditSubmit").css("background-color","#027EBE");jQuery(".my-comment .edit-load").toggle();if(aj.resFlag=="success"){aa();ac(aj.comment);if(aj.commentList.totalPages>1){jQuery("#moreComment").removeClass("hide")}q(aj.commentList.rows,aj.starCounts);N()}else{return false}},error:function(aj){jQuery("#commentEditSubmit").css("background-color","#027EBE");jQuery(".my-comment .edit-load").toggle();return false}})}function ac(af){jQuery(".my-tools-edit").addClass("hide");var ae=af.curComment;jQuery("#commentContent").removeClass("hide").html(ae).removeClass("comment-content");jQuery("#commentContent").addClass("comment-content-show");jQuery(".my-tools").removeClass("hide");var ad=af.likeCount;jQuery("#likeCount").html(ad);jQuery("#commentContent").prop("contenteditable",false)}function J(){jQuery("#radioSelect div .radio-ico").each(function(){jQuery(this).parent().removeClass("radio-span-color");jQuery(this).parent().removeClass("checked");if(jQuery(this).hasClass("radio-select-icon")){jQuery(this).addClass("radio-not-select-icon")}});jQuery(this).find(".radio-ico").removeClass("radio-not-select-icon");jQuery(this).find(".radio-ico").addClass("radio-select-icon");jQuery(this).addClass("radio-span-color");jQuery(this).addClass("checked")}function n(){if(!o){if(!jQuery(this).hasClass("not-clearTip")){jQuery(this).html("");jQuery(this).css("color","black")}}o=true}function s(ad){var ae="";ae+='<div class="reply-comment">';ae+='  <div id="replyContent" contenteditable="true" class="reply-content f13">';ae+='  	  <div class="reply-Touser" contenteditable="false">回复<span class="reply-Touser-span""> '+ad+"</span> : </div>";ae+="  </div>";ae+='  <div id="replyBtn" class="button reply-button f13">回复';ae+='    <div class="reply-load">';ae+='      <img class="loading" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAADABAMAAABG93g1AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAwUExURQAAAFp2gk9xeFZxfFp2gVx4g0VacVp2gVh0f1p3gVt3glt3glp3glt3gll1gFp3geIglncAAAAQdFJOUwBRDBZq/gVFI4PP6Ji4N6ixDvWMAAAFf0lEQVRYw+2YUWgcRRiAJ7uyuUI9s001kdZ4FbGoEDYYCSqWNN22SakPQhckF8lFg7VS8dKWWmtsLxAfYitEEjDbHmILQbPXU4oeyG0OjSSSg4OU0qpcWXqJQSgG+1IlKVfj/Du3ud3b2TmlClYyDxc2/7c788/Mznw7CP0fy4bz7DivKBIT8ClKxCt2fbEI1M+549xou2QBQk9NyF27nhi0AJ8ougFhSv/KAjaJdZQ2nNA7LWBWXEcB1gQTYQLwokhLhRtNfE+ASpHSRlzu1fcQoE+sLY29DD93B9slALgeMQzXtqf4syPwG0wMQlfjJKG7648FVoA3kskW/GdK/wIGq8tM8tUeMWcDtFQVTlQ5i3gJ7YUk+R6RVESquKJp4zlUedXMjn9TQvysSCoqlEdjWmzMdi1A3DFgC7oW+6x42YTjB52JHk9qX6/kJeAGHCkdq13JcTtQ6+pL/tSirYq6AGU62u4RAn9vqvNPQHHcJDwExXrmAwaUP+wA5FnM1Iwb5+xt6DGBGm9AdADH3VU0OKrgyjXyryZr5yn38ruHihf1R1wEtzF/yZ5l6WCia8sZByD+5IwPLGeWh5xZOiZU40xmZsKWJ0zJGtvr58PxGxHkk81pyf0aQD5cSU3xjn35mSX8EjyV2YGEEJ72h83XwvZe7Mvn8f/QbnUHaqjGqwO8mvV2wBethl81GhZkOeQnD99iqwK9BD/d6nCAk+UAX7j3kdKu6FU/QgDgBaaaNhacqjYTYDN1iUIVaTVCAB99CRpQJxABcE8fdseFNnWoAOCerqUMN07SAvy0VYyLToYsgBPrKDOmfxuyANQ05zXvCoB3KQug/la0Wu6UcvSTMuuQucWz/EHXPf3h5HQRuL5ImUtXUgEL4BPt7nnFa7FmC1hLMxnhtPapBbyrdFKm/XvauAVcVl6gNPKuZCxMgApF+YY247Ox3wnwmhKkdsYG7TwBtit7qP5wTzIlAcAnlI9LFnTfLXhd/FpsEPeAhJMMl/jD/ngc/OG0dhYG60mls9Qf9seNc/imp/WLiAugxyFJpz/4bhrGWA758+ZAVWpVLn94OGtkL0nFVdPtDwNxI7vI9IfeuG3jpPrDg/GxMv7w3PS/6A9lt+beDJRpb3+YMYElb3+gAE5/WDCBkXL+ELptf+BQGX+4v4XtD2+lJ5j+MJ9WJ1n+0K+q0W0Mf9gUVaMfsPwhqqrD2B/EgIc/dOMGYL6xrQquKP7QnU7/jP8cku9DTQep/tBm+oMs5+DjxdMfuuStIU4Uvf1hXm5FAHj6gyxXEcDDHyplbEkm4OEPjfJORAC6P6D1cksB8PAHnKQF0P0BJ2kBdH/oO4AsgOUPBPAu1O9EZ0W1q9vyHVPe+aHMOmRu8Sx/0DRPfxgYMR1Ag51pYZry8JufByyAH32R4g9GttkC1gR1yuZ9yvjRAk4EOygz831jzAJ+g7MKtz/EjRwBKoNw2uFu5S3jOwK8HmyndsZR4wwBtuvPl8bMJWht/KoEHcUnEhfgWrKvk7DK+nGiXCwVwIchsEadTEXsn1FwbLLLuAiD9YzeAecFCeVC6YfYs9q34A+PKTjJilGFiErhUw4TEeRPmw/1G2Hkv6wQUbEWc/yxN7mS2iuIn8Jxh/D1L2dmbCP4C46fcX2QLtnObBTly5LREDbmb9iBDon5Ufx2Z44yFrZn8pF/2B+uqVBGvP3BjKvD3v5AgElvfyBVtP4H/OHQOqY/CPOwZTH8oU+WP2T5A47L1Qx/2IzjO0MMf8Dxrfik7JiXP3ThuHnqmPPwBwyAP8ziCN0f+PXQIjh1ZPrDXrzfMv0BTh2Z/gC2z/IHP8g8yx8a4D6WP8yKB5j+wJnPZfmDua2z/GHL3Ko/3E75ExuZN4SINoqJAAAAAElFTkSuQmCC">';ae+="    </div>";ae+="  </div>";ae+="</div>";return ae}function U(){jQuery(".reply-comment").remove();if(!jQuery(".my-tools .reply-comment").is(":visible")){var ad=jQuery("#userName").val();jQuery(".my-tools .comment-dashed").after(s(ad))}N()}function B(){h=1;p=1;var ae=jQuery(this).attr("id");var ad=jQuery("#orderSelect").val();jQuery(".commemt-list .list-load").toggle();jQuery(".commemt-list").addClass("comment-shade");A.ajax({url:A.handleUrlParam("/platform/myreport/comment/comment-query-score"),data:{reportId:reportId,score:ae,orderVal:ad,pageNum:p,pageSize:F},success:function(af){jQuery(".commemt-list .list-load").toggle();jQuery(".commemt-list").removeClass("comment-shade");if(af.resFlag=="success"){aa();if(af.commentList.total>0){if(af.commentList.totalPages>1){jQuery("#moreComment").removeClass("hide")}q(af.commentList.rows,af.starCounts)}else{i()}N()}else{return false}},error:function(af){jQuery(".commemt-list .list-load").toggle();jQuery(".commemt-list").removeClass("comment-shade");return false}})}function I(){h=2;p=1;var ad=jQuery(this).val();var ae=jQuery("#radioSelect .checked").attr("id");jQuery(".commemt-list .list-load").toggle();jQuery(".commemt-list").addClass("comment-shade");A.ajax({url:A.handleUrlParam("/platform/myreport/comment/comment-query-order"),data:{reportId:reportId,orderVal:ad,score:ae,pageNum:p,pageSize:F},success:function(af){jQuery(".commemt-list .list-load").toggle();jQuery(".commemt-list").removeClass("comment-shade");if(af.resFlag=="success"){aa();if(af.commentList.total>0){if(af.commentList.totalPages>1){jQuery("#moreComment").removeClass("hide")}q(af.commentList.rows,af.starCounts)}else{i()}N()}else{return false}},error:function(af){jQuery(".commemt-list .list-load").toggle();jQuery(".commemt-list").removeClass("comment-shade");return false}})}function q(ag,ah){jQuery("#allStarCount").text(ah.allStarCount);jQuery("#fiveStarCount").text(ah.fiveStarCount);jQuery("#fourStarCount").text(ah.fourStarCount);jQuery("#threeStarCount").text(ah.threeStarCount);jQuery("#twoStarCount").text(ah.twoStarCount);jQuery("#oneStarCount").text(ah.oneStarCount);jQuery("#commentList").removeClass("hide");jQuery("#commentList").empty();var ad=null;var ae=null;for(var af=0;af<ag.length;af++){ad=ag[af];ae=d(ad);jQuery("#commentList").append(ae)}}function P(af){var ae="";for(var ad=0;ad<5;ad++){if(ad<af){ae+='<span class="star red-star"></span>'}else{ae+='<span class="star white-star"></span>'}}return ae}function d(an){var am=an.commentUserName;var aj=an.commentId;var af=an.score;var al=an.commentContent;var ag=an.commentTime;var ae=an.likeCount;var ak=an.commentUser;var ad=an.appendList;var ap="";var ao=A.handleUrlParam("/platform/myreport/comment/comment-user-img");ao=ao+"?t="+new Date()+"&userId="+ak;var ai="";ai+="<li>";ai+='	<div class="user-info">';ai+='		<img src="'+ao+'" />';ai+='		<span class="user-span f12" id="userName" title="'+am+'">'+am+"</span>";ai+="   </div>";ai+='   <div class="comment-info" id='+aj+">";ai+='		<span id="userId" class="hide">'+ak+"</span>";ai+='       <div class="comment-star-show">';ai+=P(af);ai+="       </div>";ai+='   	<div contenteditable="false" class="comment-info-content f13">'+al+"</div>";ai+='   	<span class="comment-info-time f12">'+ag+"</span>";ai+='  		<span id="listReplyComment" class="comment-icon comment-info-icon" title="评论"></span>';ai+='   	<span id="listContentLike" class="comment-info-like f12">赞(<span id="listLike">'+ae+"</span>)</span>";if(ad.length>0){ai+='   <div class="comment-dashed dashed"></div>';for(var ah=0;ah<ad.length;ah++){ap+=w(ad[ah])}ai+=ap}else{ai+='   <div class="comment-dashed dashed hide"></div>'}ai+="   </div>";ai+='   <div class="comment-dashed"></div>';ai+="</li>";return ai}function c(){var ae=jQuery(this).parent().attr("id");var ad=jQuery("#commentId").val();A.ajax({url:A.handleUrlParam("/platform/myreport/comment/comment-like-save"),data:{commentId:ae},success:function(af){if(af.resFlag=="success"){jQuery("#"+ae+" #listLike").text(af.likeCount);if(ae==ad){jQuery("#contentLike #likeCount").text(af.likeCount)}}else{if(af.resFlag=="hasLike"){u({title:"提示",content:"您已赞过该评论!"});return false}else{return false}}},error:function(af){return false}})}function H(){jQuery(".reply-comment").remove();if(!jQuery(this).parent().find("#replyContent").is(":visible")){var ad=jQuery(this).parent().parent().find("#userName").text();var af=s(ad);var ae=jQuery(this).parent().attr("id");if(!jQuery("#"+ae+" .dashed").is(":visible")){jQuery("#"+ae+" .dashed").removeClass("hide")}jQuery(this).next().next().after(af)}N()}function S(){var af=jQuery("#commentId").val();var ae=jQuery("#userId").val();var ad=jQuery.trim(jQuery(".my-tools #replyContent").text());ad=ad.substr(ad.indexOf(":")+2,ad.length);if(ad==""){u({title:"提示",content:"请输入回复内容!"});return false}var ag=ab(ad);if(ag>900){u({title:"提示",content:"您输入的回复内容长度不能超过900位,一个中文占3位!"});return false}X(af,ae,ad,"1")}function l(){var af=jQuery(this).parent().parent().attr("id");var ae=jQuery(this).parent().parent().find("#userId").text();var ad=jQuery.trim(jQuery(this).parent().find("#replyContent").text());ad=ad.substr(ad.indexOf(":")+2,ad.length);if(ad==""){u({title:"提示",content:"请输入回复内容!"});return false}var ag=ab(ad);if(ag>900){u({title:"提示",content:"您输入的回复内容长度不能超过900位,一个中文占3位!"});return false}X(af,ae,ad,"2")}function X(ag,af,ad,ah){var ae=jQuery("#commentId").val();if("1"==ah){jQuery(".my-tools #replyBtn").css("background-color","#bdc3c7");jQuery(".my-tools .reply-load").toggle()}else{if("2"==ah){jQuery("#"+ag+" #replyBtn").css("background-color","#bdc3c7");jQuery("#"+ag+" .reply-load").toggle()}else{if("3"==ah){jQuery(".my-tools #myReplyBtn").css("background-color","#bdc3c7");jQuery(".my-tools .reply-load").toggle()}else{if("4"==ah){jQuery("#"+ag+" #MyReplyBtn").css("background-color","#bdc3c7");jQuery("#"+ag+" .reply-load").toggle()}}}}A.ajax({url:A.handleUrlParam("/platform/myreport/comment/report-comment-reply"),data:{commentId:ag,appendToUser:af,appendContent:ad},success:function(ai){if("1"==ah){jQuery(".my-tools #replyBtn").css("background-color","#027EBE");jQuery(".my-tools .reply-load").toggle()}else{if("2"==ah){jQuery("#"+ag+" #replyBtn").css("background-color","#027EBE");jQuery("#"+ag+" .reply-load").toggle()}else{if("3"==ah){jQuery(".my-tools #MyReplyBtn").css("background-color","#027EBE");jQuery(".my-tools .reply-load").toggle()}else{if("4"==ah){jQuery("#"+ag+" #MyReplyBtn").css("background-color","#027EBE");jQuery("#"+ag+" .reply-load").toggle()}}}}if(ai.resFlag=="success"){if("1"==ah||"3"==ah){O(ai.appendList);if(ae==ag){g(ai.appendList,ai.commentId)}}else{if(ae==ag){O(ai.appendList)}g(ai.appendList,ai.commentId)}}else{return false}N()},error:function(ai){if("1"==ah){jQuery(".my-tools #replyBtn").css("background-color","#027EBE");jQuery(".my-tools .reply-load").toggle()}else{jQuery("#"+ag+" #replyBtn").css("background-color","#027EBE");jQuery("#"+ag+" .reply-load").toggle()}return false}})}function w(aj){var ae=aj.appendId;var ak=aj.appendTime;var ad=aj.appendContent;var al=aj.appendUser;var ah=aj.appendToUser;var af=aj.appendUserName;var ai=aj.appendToUserName;var ag="";ag+='<div class="append-comment" id='+ae+">";ag+='   <div id="appendContent" class="append-content f12">';ag+='       <span id="appendUserId" class="hide">'+al+"</span>";ag+='       <span id="appendUserName" class="hide">'+aj.appendUserName+"</span>";ag+=af+'<span class="append-reply-span">回复</span>'+ai+" : ";ag+="       <span>"+ad+"<span>";ag+="   </div>";ag+='	<div class="append-tools">';ag+='		<span id="appendTime" class="append-time f12">'+ak+"</span>";ag+='		<span id="appendComment" class="comment-icon append-info-icon" title="评论"></span>';ag+='   	<span id="delAppComment" class="del-icon append-info-icon del-append-icon hide" title="删除"></span>';ag+="	</div>";ag+="</div>";return ag}function O(af){jQuery(".my-tools .reply-comment").addClass("hide");jQuery(".my-tools .append-comment").remove();jQuery(".my-tools #replyContent").text("");var ae="";if(af.length>0){for(var ad=0;ad<af.length;ad++){ae+=w(af[ad])}jQuery(".my-tools").append(ae)}}function g(ag,af){jQuery("#"+af+" .reply-comment").addClass("hide");jQuery("#"+af).find(".append-comment").remove();var ae="";if(ag.length>0){for(var ad=0;ad<ag.length;ad++){ae+=w(ag[ad])}if(!jQuery("#"+af+" .dashed").is(":visible")){jQuery("#"+af+" .dashed").removeClass("hide")}jQuery("#"+af).append(ae)}}function M(ae,af){var ad="";ad+='<div class="reply-comment">';ad+='  <span id="appendUserId" class="hide">'+ae+"</span>";ad+='  <span id="appendUserName" class="hide">'+af+"</span>";ad+='  <div id="replyContent" contenteditable="true" class="reply-content f12">';ad+='  		<div class="reply-Touser" contenteditable="false">回复<span class="reply-Touser-span""> '+af+"</span> : </div>";ad+="  </div>";ad+='  <div id="myReplyBtn" class="button reply-button f13">回复';ad+='    <div class="reply-load">';ad+='     	 <img class="loading" src="data:image/png;base64,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">';ad+="    </div>";ad+="  </div>";ad+="</div>";return ad}function D(){if(!jQuery(this).parent().parent().find("#replyContent").is(":visible")){jQuery(".reply-comment").remove();var ae=jQuery(this).parent().parent().find("#appendUserId").text();var af=jQuery(this).parent().parent().find("#appendUserName").text();var ad=M(ae,af);jQuery(this).parent().parent().after(ad)}}function V(){if(!jQuery(this).parent().parent().find("#replyContent").is(":visible")){jQuery(".reply-comment").remove();var ae=jQuery(this).parent().parent().find("#appendUserId").text();var af=jQuery(this).parent().parent().find("#appendUserName").text();var ad=M(ae,af);jQuery(this).parent().parent().after(ad)}}function b(){var af=jQuery("#commentId").val();var ae=jQuery(this).parent().find("#appendUserId").text();var ad=jQuery.trim(jQuery(this).parent().find("#replyContent").text());ad=ad.substr(ad.indexOf(":")+2,ad.length);if(ad==""){u({title:"提示",content:"请输入回复内容"});return false}var ag=ab(ad);if(ag>900){u({title:"提示",content:"您输入的回复内容长度不能超过900位,一个中文占3位!"});return false}X(af,ae,ad,"3")}function W(){var af=jQuery(this).parent().parent().attr("id");var ae=jQuery(this).parent().find("#appendUserId").text();var ad=jQuery.trim(jQuery(this).parent().find("#replyContent").text());ad=ad.substr(ad.indexOf(":")+2,ad.length);if(ad==""){u({title:"提示",content:"请输入回复内容!"});return false}var ag=ab(ad);if(ag>900){u({title:"提示",content:"您输入的回复内容长度不能超过900位,一个中文占3位!"});return false}X(af,ae,ad,"4")}function j(){var ae=jQuery(this).parent().parent().attr("id");var ag=jQuery(this).parent().parent().parent().attr("id");var ad=jQuery("#curUserId").val();var af=jQuery(this).parent().parent().find("#appendUserId").text();f({title:"提示",content:"您确定删除此追评？"},function(){A.ajax({url:A.handleUrlParam("/platform/myreport/comment/comment-append-del"),data:{appendId:ae},success:function(ah){if(ah.resFlag=="success"){jQuery("#"+ae).remove();if(ad==af){jQuery("#"+ae).remove()}if(jQuery("#"+ag+" .append-comment").length==0){jQuery("#"+ag+" .dashed").addClass("hide")}}else{return false}},error:function(ah){return false}})})}function k(){p+=1;var af=null;var ae=null;if(h==0){af=A.handleUrlParam("/platform/myreport/comment/comment-query-list");ae={reportId:reportId,pageNum:p,pageSize:F}}else{if(h==1){var ag=jQuery("#radioSelect .checked").attr("id");af=A.handleUrlParam("/platform/myreport/comment/comment-query-list");ae={reportId:reportId,score:ag,pageNum:p,pageSize:F}}else{if(h==2){var ad=jQuery("#orderSelect").val();af=A.handleUrlParam("/platform/myreport/comment/comment-query-list");ae={reportId:reportId,orderVal:ad,pageNum:p,pageSize:F}}}}jQuery(".commemt-list .list-load").toggle();jQuery(".commemt-list").addClass("comment-shade");A.ajax({url:af,data:ae,success:function(ah){jQuery(".commemt-list .list-load").toggle();jQuery(".commemt-list").removeClass("comment-shade");if(ah.resFlag=="success"){jQuery("#endComment").addClass("hide");if(ah.commentList.totalPages==p){jQuery("#moreComment").addClass("hide");jQuery("#endComment").removeClass("hide")}Q(ah.commentList.rows);N()}else{return false}},error:function(ah){jQuery(".commemt-list .list-load").toggle();jQuery(".commemt-list").removeClass("comment-shade");return false}})}function Q(ag){var ad=null;var ae=null;for(var af=0;af<ag.length;af++){ad=ag[af];ae=d(ad);jQuery("#commentList").append(ae)}}function aa(){jQuery("#endComment").addClass("hide");jQuery("#moreComment").addClass("hide")}function N(){var ae=jQuery(".my-comment").height();var ad=jQuery("#commentList").height();jQuery("#commentIframe",parent.document).css("height",ae+ad+180)}function u(ah){jQuery(".showAlert").remove();var ak={title:"提示框",content:"您已评论成功！"};var af=$.extend(true,{},ak,ah);var ad=jQuery("<div>",{css:{"class":"showpanel",position:"fixed",left:"0",right:"0",top:"0",bottom:"0",background:"black",opacity:".5"}});var al=jQuery("<div>",{"class":"showAlert",css:{width:"378px",height:"auto","min-height":"150px",background:"#fff",position:"absolute",left:"50%",top:"120px","margin-left":"-189px","z-index":"10002","box-shadow":"0 0 8px rgba(0,0,0,.1)",border:"solid 1px #dcdcdc"}});jQuery("body").unbind("click").bind("click",function(){if(al.size()>0){al.remove()}});var ag=jQuery("<div>",{html:af.title,css:{height:"44px",width:"100%","border-bottom":"2px solid #EEEEEE","font-size":"16px",padding:"10px 17px",position:"absolute",top:"0"}});var ae=jQuery("<div>",{html:af.content,css:{height:"44px",width:"100%","font-size":"13px",padding:"10px 17px",position:"absolute",top:"46px",bottom:"45px"}});var ai=jQuery("<div>",{html:"确定",css:{border:"1px solid #4898d5",background:"#2e8ded",color:"#fff","font-size":"14px","letter-spacing":"1px",height:"30px",width:"62px","padding-top":"5px","padding-left":"16px",position:"absolute",right:"10px",cursor:"pointer","border-radius":"4px"},onmouseover:"this.style.background='#3092f5'",onmouseout:"this.style.background='#2e8ded'"});ai.bind("click",function(){ad.remove();al.remove()});var aj=jQuery("<div>",{html:ai,css:{height:"45px",width:"100%",position:"absolute",bottom:"0","padding-top":"7px"}});al.append(ag).append(ae).append(aj);$("body",parent.document).append(al).append(ad)}function f(ai,am){jQuery(".showConfirm").remove();var ak={title:"确认框",content:"确定删除此评论吗？"};var af=$.extend(true,{},ak,ai);var ad=jQuery("<div>",{css:{"class":"showpanel",position:"fixed",left:"0",right:"0",top:"0",bottom:"0",background:"black",opacity:".5"}});var an=jQuery("<div>",{"class":"showConfirm",css:{width:"378px",height:"auto","min-height":"136px",background:"#fff",position:"absolute",left:"50%",top:"120px","margin-left":"-189px","z-index":"10002","box-shadow":"0 0 8px rgba(0,0,0,.1)",border:"solid 1px #dcdcdc"}});var ah=jQuery("<div>",{html:af.title,css:{height:"44px",width:"100%","border-bottom":"2px solid #EEEEEE","font-size":"16px",padding:"10px 17px",position:"absolute",top:"0"}});var ae=jQuery("<div>",{html:af.content,css:{height:"44px",width:"100%","font-size":"13px",padding:"10px 17px",position:"absolute",top:"46px",bottom:"45px"}});var ag=jQuery("<div>",{html:"确定",css:{border:"1px solid #4898d5",background:"#2e8ded",color:"#fff","font-size":"14px","letter-spacing":"1px",height:"30px",width:"62px","padding-top":"5px","padding-left":"16px",position:"absolute",right:"80px",cursor:"pointer","border-radius":"4px"},onmouseover:"this.style.background='#3092f5'",onmouseout:"this.style.background='#2e8ded'"});ag.bind("click",function(){if(typeof am=="function"){am()}an.remove();ad.remove()});var al=jQuery("<div>",{html:"取消",css:{border:"1px solid #dedede",background:"#f1f1f1","font-size":"14px","letter-spacing":"1px",height:"30px",width:"62px","padding-top":"5px","padding-left":"16px",position:"absolute",right:"10px",cursor:"pointer","border-radius":"4px"},onmouseover:"this.style.background='#f3f3f3'",onmouseout:"this.style.background='#f1f1f1'"});al.bind("click",function(){an.remove();ad.remove()});var aj=jQuery("<div>",{css:{height:"45px",width:"100%",position:"absolute",bottom:"0","padding-top":"7px"}});aj.append(ag).append(al);an.append(ah).append(ae).append(aj);$("body",parent.document).append(ad).append(an)}});