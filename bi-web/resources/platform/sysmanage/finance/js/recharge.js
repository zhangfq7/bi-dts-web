define(["sabace","recharge/message"],function(b,d){function e(){jQuery(".pay-wechat, .pay-alipay, .pay-qq").on("click",function(){jQuery(".pay-type-select").removeClass("pay-type-select");jQuery(this).addClass("pay-type-select")});jQuery(".tab-pane").validationEngine({autoHidePrompt:true,autoHideDelay:2500,binded:true,promptPosition:"bottomLeft",showOneMessage:true});jQuery("#integralNumber").on("keyup",function(){var f=jQuery(this).val();if(f>=100000){jQuery(this).val(100000);jQuery("#rechargeAmount").html("10000.00");return}if(b.IsEmpty(f)){jQuery("#rechargeAmount").html("0.00");return}jQuery("#rechargeAmount").html(parseFloat(f)/10)});jQuery("#submitButton").on("click",function(){var j=jQuery(".tab-pane").validationEngine("validate");if(!j){return false}var i=jQuery("#integralNumber").val();var h=parseFloat(i)/10;var k=jQuery(".pay-type-select");var g;if(jQuery(k).hasClass("pay-alipay")){g="1"}else{if(jQuery(k).hasClass("pay-wechat")){g="2"}else{if(jQuery(k).hasClass("pay-qq")){g="3"}else{return false}}}var l="1";var f={rechargeType:g,rechargeIntegral:i,rechargeState:l,payMoneyStr:h};bi.dialog.confirm({title:b.getMessage("finance.label.confirm"),message:b.getMessage("finance.msg.submit.confirm",[i,h]),callback:function(m){if(!m){return}else{a(f)}}})})}function a(f){f.rechargeState="9";c(f)}function c(f){b.ajax({url:b.handleUrlParam("/platform/sysmanage/finance/save-company-recharge"),data:f,loading:{title:b.getMessage("finance.label.tip"),text:b.getMessage("finance.label.saving")},success:function(g){bi.dialog.show({title:b.getMessage("finance.label.tip"),message:b.getMessage("finance.label.recharge.success")})},error:function(g){bi.dialog.show({type:bi.dialog.TYPE_DANGER,title:b.getMessage("finance.label.tip"),message:g.responseText||b.getMessage("finance.label.recharge.failed")})}})}return{init:e}});