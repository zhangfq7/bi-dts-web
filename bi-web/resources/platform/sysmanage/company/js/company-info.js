define(["sabace","company/message"],function(a,b){function d(){jQuery("#saveCompanyButton").on("click",c);jQuery("#companyType").treeselect({height:200,chkStyle:"radio",searchAjaxParam:"companyTypeName",width:(jQuery("#companyType").width()+21),url:a.handleUrlParam("/platform/sysmanage/company/company-type"),});jQuery("#savePanel").validationEngine({autoHidePrompt:true,autoHideDelay:2000,binded:true,promptPosition:"bottomLeft",showOneMessage:true})}function c(){var i=$("#savePanel").validationEngine("validate");if(!i){return false}var f=$("#companyId").val();var h=$("#companyName").val().trim();var g=$("#companyDesc").val();var j=$("#companyType").attr("truevalue");var e={companyId:f,companyName:h,companyType:j,companyRemark:g};bi.dialog.confirm({title:a.getMessage("company.label.confirm"),message:a.getMessage("company.msg.saveCompany.confirm"),callback:function(k){if(!k){return}a.ajax({url:a.handleUrlParam("/platform/sysmanage/company/save-company"),data:e,loading:{title:a.getMessage("company.label.tip"),text:a.getMessage("company.label.pleaseWait")},success:function(l){if(l.saveFlag=="true"){bi.dialog.show({title:a.getMessage("company.label.succeed"),message:a.getMessage("company.msg.saveCompany.success")})}else{bi.dialog.show({type:bi.dialog.TYPE_DANGER,title:a.getMessage("company.label.error"),message:a.getMessage(l.errorMsg)})}},error:function(l){bi.dialog.show({type:bi.dialog.TYPE_DANGER,title:a.getMessage("company.label.error"),message:l.responseText||a.getMessage("company.msg.saveCompany.error")})}})}})}return{init:d}});