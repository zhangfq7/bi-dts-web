define(["sabace","message"],function(c,d){function a(){jQuery(".cisw-del").on("click",function(){var f=jQuery(this).attr("companyId");var g=jQuery(this).attr("userId");bi.dialog.confirm({title:c.getMessage("company.label.tip"),message:c.getMessage("company.cisaw.msg.remove"),callback:function(h){if(h){c.ajax({type:"post",cache:false,dataType:"json",url:c.handleUrlParam("/platform/sysmanage/cisaw/black-del"),data:{companyId:f,userId:g},loading:{title:c.getMessage("company.label.tip"),text:c.getMessage("company.label.pleaseWait")},success:function(i){bi.dialog.show({title:c.getMessage("company.label.tip"),message:c.getMessage("company.cisaw.msg.success.tip"),nl2br:false,closable:true,closeByBackdrop:false,closeByKeyboard:false,buttons:[{label:c.getMessage("company.label.confirm"),cssClass:"btn-info",action:function(j){b();j.close()}}]})},error:function(i){bi.dialog.show({title:c.getMessage("company.label.tip"),message:c.getMessage("company.cisaw.msg.failure.tip"),nl2br:false,closable:true,closeByBackdrop:false,closeByKeyboard:false,buttons:[{label:c.getMessage("company.label.confirm"),cssClass:"btn-info",action:function(j){j.close()}}]})}})}}})})}function e(){a();jQuery(".cisw-black-operate").on("click",function(){b()})}function b(){var f=jQuery(".cisw-black-lable1").val().trim();c.ajax({type:"post",cache:false,dataType:"json",url:c.handleUrlParam("/platform/sysmanage/cisaw/black-search-list"),data:{searchName:f},success:function(k){var h="";var j=k.ciswBlackList;if(j.length==0){h+='<div class="cisw-black-line">\n';h+='<div class="company-ciswblack-warning">\n';h+='<div class="icon">\n';h+="!";h+="</div>\n";h+='<div class="text">'+c.getMessage("company.cisaw.blacklist.tip")+"</div>";h+="</div>\n";h+="</div>\n"}else{for(var g=0;g<j.length;g++){h+='<div class="company-ciswblack-line">';h+='<div class="company-ciswblack-table company-ciswblack-img">';h+='<img style="width: 60px;padding-top: 6px;border-radius: 60px;" src="'+webpath+"/platform/readUserImg/OVERVIEW_SYS?userImgId="+j[g].userId+'" />';h+="</div>";h+='<div class="company-ciswblack-table company-ciswblack-first">'+j[g].userName+"</div>";h+='<div class="company-ciswblack-table company-ciswblack-third">	';h+='<div class="company-ciswblack-label1 f14">'+c.getMessage("company.cisaw.label.Postscript")+"</div>";h+='<div class="company-cisaw-bad-label2" title="'+j[g].authMsg+'">';h+=j[g].authMsg;h+="</div>";h+='<div style="clear:both;"></div>';h+="</div>";h+='<div class="company-ciswblack-table company-ciswblack-four">';h+='<button type="button"  class="cisw-del btn btn-info btn-sm" companyId="'+j[g].companyId+'" userId="'+j[g].userId+'">'+c.getMessage("company.cisaw.button.remove")+"</button>";h+="</div>";h+="</div>"}}jQuery("#cisw-black-list").html("").html(h);a()},error:function(g){}})}return{init:e}});