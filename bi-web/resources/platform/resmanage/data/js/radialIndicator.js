(function(e,f,g){var b=Math.PI*2,a=Math.PI/2;function d(o){var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;o=o.replace(n,function(q,t,s,p){return t+t+s+s+p+p});var m=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return m?[parseInt(m[1],16),parseInt(m[2],16),parseInt(m[3],16)]:null}function l(n,p,m,o){return Math.round(m+((o-m)*n/p))}function c(s,n,u,m,t){var o=t.indexOf("#")!=-1?d(t):t.match(/\d+/g),r=m.indexOf("#")!=-1?d(m):m.match(/\d+/g),q=u-n,p=s-n;if(!o||!r){return null}return"rgb("+l(p,q,r[0],o[0])+","+l(p,q,r[1],o[1])+","+l(p,q,r[2],o[2])+")"}function h(){var m=arguments,r=m[0];for(var o=1,p=m.length;o<p;o++){var q=m[o];for(var n in q){if(q.hasOwnProperty(n)){r[n]=q[n]}}}return r}function i(m){return function(q){if(!m){return q.toString()}q=q||0;var o=q.toString().split("").reverse(),p=m.split("").reverse(),r=0,n=0;for(var s=p.length;r<s;r++){if(!o.length){break}if(p[r]=="#"){n=r;p[r]=o.shift()}}p.splice(n+1,p.lastIndexOf("#")-n,o.reverse().join(""));return p.reverse().join("")}}function k(m,o){o=o||{};o=h({},j.defaults,o);this.indOption=o;if(typeof m=="string"){m=g.querySelector(m)}if(m.length){m=m[0]}this.container=m;var n=g.createElement("canvas");m.appendChild(n);this.canElm=n;this.ctx=n.getContext("2d");this.current_value=o.initValue||o.minValue||0}k.prototype={constructor:j,init:function(){var q=this.indOption,o=this.canElm,n=this.ctx,p=(q.radius+q.barWidth)*2,m=p/2;this.formatter=typeof q.format=="function"?q.format:i(q.format);this.maxLength=q.percentage?4:this.formatter(q.maxValue).length;o.width=p;o.height=p;n.strokeStyle=q.barBgColor;n.lineWidth=q.barWidth;n.beginPath();n.arc(m,m,q.radius,0,2*Math.PI);n.stroke();this.imgData=n.getImageData(0,0,p,p);this.value(this.current_value);return this},value:function(G){if(G===undefined||isNaN(G)){return this.current_value}G=parseInt(G);var v=this.ctx,F=this.indOption,B=F.barColor,x=(F.radius+F.barWidth)*2,z=F.minValue,p=F.maxValue,E=x/2;G=G<z?z:G>p?p:G;var o=Math.round(((G-z)*100/(p-z))*100)/100,C=F.percentage?o+"%":this.formatter(G);this.current_value=G;v.putImageData(this.imgData,0,0);if(typeof B=="object"){var u=Object.keys(B);for(var y=1,q=u.length;y<q;y++){var A=u[y-1],w=u[y],n=B[A],r=B[w],t=G==A?n:G==w?r:G>A&&G<w?F.interpolate?c(G,A,w,n,r):r:false;if(t!=false){B=t;break}}}v.strokeStyle=B;if(F.roundCorner){v.lineCap="round"}v.beginPath();v.arc(E,E,F.radius,-(a),((b)*o/100)-a,false);v.stroke();if(F.displayNumber){var D=v.font.split(" "),s=F.fontWeight,m=F.fontSize||(x/(this.maxLength-(Math.floor(this.maxLength*1.4/4)-1)));D=F.fontFamily||D[D.length-1];v.fillStyle=F.fontColor||B;v.font=s+" "+m+"px "+D;v.textAlign="center";v.textBaseline="middle";v.fillText(C,E,E)}return this},animate:function(r){var q=this.indOption,m=this.current_value||q.minValue,p=this,o=Math.ceil((q.maxValue-q.minValue)/(q.frameNum||(q.percentage?100:500))),n=r<m;if(this.intvFunc){clearInterval(this.intvFunc)}this.intvFunc=setInterval(function(){if((!n&&m>=r)||(n&&m<=r)){if(p.current_value==m){clearInterval(p.intvFunc);return}else{m=r}}p.value(m);if(m!=r){m=m+(n?-o:o)}},q.frameTime);return this},option:function(m,n){if(n===undefined){return this.option[m]}if(["radius","barWidth","barBgColor","format","maxValue","percentage"].indexOf(m)!=-1){this.indOption[m]=n;this.init().value(this.current_value)}this.indOption[m]=n}};function j(m,n){var o=new k(m,n);o.init();return o}j.defaults={radius:50,barWidth:5,barBgColor:"#eeeeee",barColor:"#99CC33",format:null,frameTime:10,frameNum:null,fontColor:null,fontFamily:null,fontWeight:"bold",fontSize:null,interpolate:true,percentage:false,displayNumber:true,roundCorner:false,minValue:0,maxValue:100,initValue:0};f.radialIndicator=j;if(e){e.fn.radialIndicator=function(m){return this.each(function(){var n=j(this,m);e.data(this,"radialIndicator",n)})};e.fn.radialIndicatorTemp=function(m){var n=j(this,m);e.data(this,"radialIndicator",n);return n}}}(window.jQuery,window,document,void 0));