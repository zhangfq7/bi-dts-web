(function(){var b={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#fff",speed:1,trail:60,shadow:false,hwaccel:false,className:"spinner",zIndex:2000000000,};var a={init:function(){var h=this;var n={check:{enable:true,},view:{},data:{simpleData:{enable:true}},async:{otherParam:{searchText:""}},callback:{beforeClick:f,onCheck:m,onExpand:g,onAsyncSuccess:g}};var k=arguments[0].async.zTreeId,e=arguments[0].async.mTreeId;n=$.extend(true,{},n,arguments[0]);if(n.async.label){$(this).data("code",n.async.code.split(",")).val(n.async.label)}n.treeId=arguments[0].async.treeId;var d=jQuery("#"+e);h.prop("readonly",true);jQuery("#"+e+" .filterButton").on("click",function(){o()});function o(){jQuery("#"+e).find(".ztree-loading").show(1,function(){var q=jQuery(this);var p=$.fn.zTree.getZTreeObj(k);p.setting.async.otherParam.searchText=jQuery("#"+e+" .filterInput").val();if(typeof(Spinner2)!="undefined"){q.spin(b)}p.reAsyncChildNodes(null,"refresh",false,function(){if(typeof(Spinner2)!="undefined"){q.spin("close").hide()}else{q.spin("close").hide()}if($("#"+k+" >li").length==0){d.find(".treeNoResultPanel").show();$("#"+k).hide()}else{d.find(".treeNoResultPanel").hide();$("#"+k).show()}})})}jQuery(".checkAllNodes").on("click",function(){if(!d.find(".treeNoResultPanel").is(":hidden")){return}var q=$.fn.zTree.getZTreeObj($(this).parent().attr("zTreeId"));q.checkAllNodes(true);nodes=q.getCheckedNodes(true),v="",value=[];for(var r=0,p=nodes.length;r<p;r++){v+=nodes[r].name+",";value.push(nodes[r].id)}if(v.length>0){v=v.substring(0,v.length-1)}h.attr("value",v).data("code",value).focus();jQuery("#bztree_input").val("");jQuery("#bztree_input").val(v)});jQuery(".removeAllNodes").on("click",function(){var p=$.fn.zTree.getZTreeObj($(this).parent().attr("zTreeId"));p.checkAllNodes(false);h.val("");h.removeData("code")});jQuery(".closeTreeMenu").on("click",function(){});$.fn.zTree.init($("#"+k),n,n.zNodes);var l=h.offset();if($.nicescroll){i($("#"+e+" .ztree"))}function c(){d.find(".filterInput").val("");var t=h.data("code")||[];var p=$.fn.zTree.getZTreeObj(k);for(var q=0,s=t.length;q<s;q++){var r=p.getNodeByParam("code",t[q],null);if(r){p.checkNode(r,true,null,true)}}}function g(s,u,t){var w=h.data("code")||[];var p=$.fn.zTree.getZTreeObj(k);if(t){node=t.children}else{node=p.getNodes()}for(var q in node){var r=node[q].id;if($.inArray(r,w)>-1){p.checkNode(node[q],true,null,true)}}}function j(){$("#"+e).fadeOut("fast");$("body").off("mousedown scroll",onBodyDown)}function f(r,q){var p=$.fn.zTree.getZTreeObj(r);p.checkNode(q,!q.checked,null,true);return false}function m(w,t,z){if(jQuery("#"+e).find(".ztree-loading:visible").length>0){return}var A=h.val().split(",");var q=h.data("code")||[];var y=$.fn.zTree.getZTreeObj(t),p=y.getCheckedNodes(true),C=[],B=[];var u=[];for(var s=0,r=p.length;s<r;s++){B.push(p[s].id);C.push(p[s].name)}$.merge(C,A);$.merge(B,q);$.unique(C);$.unique(B);if(!z.checked){C.splice($.inArray(z.name,C),1);B.splice($.inArray(z.id,B),1)}var x=C.join(",");if(x.substring(x.length,x.length-1)==","){x=x.substring(0,x.length-1)}h.val(x).data("code",B)}function i(r,p){if(r.getNiceScroll().length==0){var q=$.extend(true,{},{cursorcolor:"#D4D4D4",cursorborder:"none",preservenativescrolling:false},p);r.niceScroll(q)}else{setTimeout(function(){r.getNiceScroll().resize()},100)}}this.data("treeId",k);return this},getCheckCode:function(){var c=$(this);return c.data("code")},setCheckCode:function(c,d){$(this).data("code",d.split(",")).val(c)},destroy:function(){var d=$(this);var c=d.data("treeId");if(c){jQuery("#m"+c).remove();$.fn.zTree.destroy(c)}}};$.fn.dzTree=function(){var c=arguments[0];if(a[c]){c=a[c];arguments=Array.prototype.slice.call(arguments,1)}else{if(typeof(c)=="object"||!c){c=a.init}else{console.error("Method "+c+" does not exist on jQuery.bzTree");return this}}return c.apply(this,arguments)}})(jQuery);