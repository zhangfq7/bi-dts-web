define(["sabace"],function(a){var b={};b.module={mFlag:"",paramObj:{},ziduanId:"",changeBg:function(f,e){var d=jQuery(f);for(var c=0;c<d.length;c++){if(jQuery(d[c]).hasClass("filterText-bg")){jQuery(d[c]).removeClass("filterText-bg")}}jQuery(e).addClass("filterText-bg")},changeBgColor:function(d,c){d=d+" div";b.module.changeBg(d,c)},changeTab:function(c){var c=c+"Div";var d=jQuery(".dataTabDiv");for(var f=0;f<d.length;f++){var e=jQuery(d[f]).attr("id");if(c==e){if(jQuery(d[f]).hasClass("dis-none")){jQuery(d[f]).removeClass("dis-none")}}else{if(!jQuery(d[f]).hasClass("dis-none")){jQuery(d[f]).addClass("dis-none")}}}},initTabForModify:function(e){var f=b.module.paramObj.filterType;log(b.module.paramObj);if("2"==f){if("8"==e){jQuery(".numberFilterDiv").removeClass("dis-none");b.module.changeBgColor(".numberFilterDiv",".numberFilterDiv #interval");jQuery(".numberFilterDiv div").on("click",function(){b.module.changeBgColor(".numberFilterDiv",this);b.module.changeSelect(this)})}else{jQuery(".headFilterDiv").removeClass("dis-none");b.module.changeBgColor(".headFilterDiv",".headFilterDiv #interval");jQuery(".headFilterDiv div").on("click",function(){b.module.changeBgColor(".headFilterDiv",this);b.module.changeSelect(this)})}b.module.changeTab("interval");var d=[];var j=b.module.paramObj.whereValue;if(!a.IsEmpty(j)){var i=j.split(",");if(i.length==2){if(i[0].startWith(">=")){d.push(">=");if(i[0].length>2){d.push(i[0].substring(2))}else{d.push("")}}else{d.push(">");if(i[0].length>1){d.push(i[0].substring(1))}else{d.push("")}}if(i[1].startWith("<=")){d.push("<=");if(i[1].length>2){d.push(i[1].substring(2))}else{d.push("")}}else{d.push("<");if(i[1].length>1){d.push(i[1].substring(1))}else{d.push("")}}jQuery("#minValue").val(d[0]);jQuery("#minValue").trigger("chosen:updated");jQuery("#minValueText").val(d[1]);jQuery("#maxValue").val(d[2]);jQuery("#maxValue").trigger("chosen:updated");jQuery("#maxValueText").val(d[3])}}}else{if("3"==f){if("8"==e){jQuery(".numberFilterDiv").removeClass("dis-none");b.module.changeBgColor(".numberFilterDiv",".numberFilterDiv #precise");jQuery(".numberFilterDiv div").on("click",function(){b.module.changeBgColor(".numberFilterDiv",this);b.module.changeSelect(this)})}else{jQuery(".headFilterDiv").removeClass("dis-none");b.module.changeBgColor(".headFilterDiv",".headFilterDiv #precise");jQuery(".headFilterDiv div").on("click",function(){b.module.changeBgColor(".headFilterDiv",this);b.module.changeSelect(this)})}b.module.changeTab("precise");jQuery("#preciseSelect").val(b.module.paramObj.isExclude);$("#preciseSelect").trigger("chosen:updated");jQuery("#preciseSelectText").val(b.module.paramObj.whereValue)}else{if("9"==f){jQuery(".headFilterDiv").removeClass("dis-none");b.module.changeBgColor(".headFilterDiv","#fuzzy");b.module.changeTab("fuzzy");jQuery("#fuzzySelect").val(b.module.paramObj.isExclude);jQuery("#fuzzySelect").trigger("chosen:updated");jQuery("#fuzzySelectText").val(b.module.paramObj.whereValue);jQuery(".headFilterDiv div").on("click",function(){b.module.changeBgColor(".headFilterDiv",this);b.module.changeSelect(this)})}else{if("8"==f){if("8"==e){jQuery(".numberFilterDiv").removeClass("dis-none");b.module.changeBgColor(".numberFilterDiv",".numberFilterDiv #isEmpty");jQuery(".numberFilterDiv div").on("click",function(){b.module.changeBgColor(".numberFilterDiv",this);b.module.changeSelect(this)})}else{jQuery(".headFilterDiv").removeClass("dis-none");b.module.changeBgColor(".headFilterDiv",".headFilterDiv #isEmpty");jQuery(".headFilterDiv div").on("click",function(){b.module.changeBgColor(".headFilterDiv",this);b.module.changeSelect(this)})}b.module.changeTab("isEmpty");jQuery("input[name='relRadio'][value="+b.module.paramObj.whereValue+"]").attr("checked",true)}else{if("4"==f){var h=b.module.paramObj;var g=h.whereValue;jQuery(".monthFilterDiv").removeClass("dis-none");var k="YYYY-MM";jQuery("#month_input").datetimepicker({format:k,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});jQuery("#month_section_input_from").datetimepicker({format:k,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});jQuery("#month_section_input_to").datetimepicker({format:k,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});jQuery(".monthFilterDiv div").on("click",function(){b.module.changeBgColor(".monthFilterDiv",this);b.module.changeSelect(this)});if(-1==g.indexOf(",")){b.module.changeBgColor(".monthFilterDiv","#month");b.module.changeTab("month");jQuery("#month_input").val(g)}else{var c=g.split(",");b.module.changeBgColor(".monthFilterDiv","#monthSection");b.module.changeTab("monthSection");jQuery("#month_section_input_from").val(c[0].substring(2));jQuery("#month_section_input_to").val(c[1].substring(2))}}else{if("6"==f){var h=b.module.paramObj;var g=h.whereValue;jQuery(".dateFilterDiv").removeClass("dis-none");var k="YYYY-MM-DD";jQuery("#date_input").datetimepicker({format:k,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});jQuery("#date_section_input_from").datetimepicker({format:k,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});jQuery("#date_section_input_to").datetimepicker({format:k,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});if(-1==g.indexOf(",")){b.module.changeBgColor(".dateFilterDiv","#date");b.module.changeTab("date");jQuery("#date_input").val(g)}else{var c=g.split(",");b.module.changeBgColor(".dateFilterDiv","#dateSection");b.module.changeTab("dateSection");jQuery("#date_section_input_from").val(c[0].substring(2));jQuery("#date_section_input_to").val(c[1].substring(2))}jQuery(".dateFilterDiv div").on("click",function(){b.module.changeBgColor(".dateFilterDiv",this);b.module.changeSelect(this)})}else{if("7"==f){var h=b.module.paramObj;var g=h.whereValue;jQuery(".timeFilterDiv").removeClass("dis-none");var k="YYYY-MM-DD HH:mm:ss";jQuery("#time_input").datetimepicker({format:k,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});jQuery("#time_section_input_from").datetimepicker({format:k,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});jQuery("#time_section_input_to").datetimepicker({format:k,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});jQuery(".timeFilterDiv div").on("click",function(){b.module.changeBgColor(".timeFilterDiv",this);b.module.changeSelect(this)});if(-1==g.indexOf(",")){b.module.changeBgColor(".timeFilterDiv","#time");b.module.changeTab("time");jQuery("#time_input").val(g)}else{var c=g.split(",");b.module.changeBgColor(".timeFilterDiv","#timeSection");b.module.changeTab("timeSection");jQuery("#time_section_input_from").val(c[0].substring(2));jQuery("#time_section_input_to").val(c[1].substring(2))}}}}}}}}},getSelectData:function(m){var v=jQuery(m).attr("id")+"Div";var c={};if("intervalDiv"==v){var n=jQuery("#minValue").val();var p=jQuery("#minValueText").val();var s=jQuery("#maxValue").val();var t=jQuery("#maxValueText").val();if(a.IsEmpty(p)){c.whereValue=n+","+s+t}else{if(a.IsEmpty(t)){c.whereValue=n+p+","+s}else{c.whereValue=n+p+","+s+t}}c.whereText=n+p+","+s+t;c.trueText=n+p+","+s+t;c.filterType="2";c.isExclude="0"}else{if("preciseDiv"==v){var j=jQuery("#preciseSelect").val();var h=jQuery("#preciseSelectText").val();c.whereValue=h;c.whereText=j+h;if("0"==j){c.trueText=a.getMessage("data.dataLink.label.Contains")+h}else{c.trueText=a.getMessage("data.dataLink.label.Exclude")+h}c.filterType="3";c.isExclude=j}else{if("fuzzyDiv"==v){var u=jQuery("#fuzzySelect").val();var e=jQuery("#fuzzySelectText").val();c.whereValue=e;c.whereText=u+e;if("0"==u){c.trueText=a.getMessage("data.dataLink.label.Contains")+e}else{c.trueText=a.getMessage("data.dataLink.label.Exclude")+e}c.filterType="9";c.isExclude=u}else{if("isEmptyDiv"==v){var l=jQuery("input[name='relRadio']:checked").val();if("0"==l){c.whereText=a.getMessage("data.dataLink.label.noLabel");c.trueText=a.getMessage("data.dataLink.label.IsNotEmpty")}else{c.whereText=a.getMessage("data.dataLink.label.yesLabel");c.trueText=a.getMessage("data.dataLink.label.IsEmpty")}c.whereValue=l;c.filterType="8";c.isExclude="0"}else{if("monthDiv"==v){var i=jQuery("#month_input").val();c.whereValue=i;c.whereText=i;c.trueText=a.getMessage("data.dataLink.label.equalTemp")+i;c.filterType="4";c.isExclude="0"}else{if("monthSectionDiv"==v){var g=jQuery("#month_section_input_from").val();var w=jQuery("#month_section_input_to").val();c.whereValue=">="+g+",<="+w;c.whereText=g+","+w;c.trueText=g+","+w;c.filterType="4";c.isExclude="0"}else{if("dateDiv"==v){var o=jQuery("#date_input").val();c.whereValue=o;c.whereText=o;c.trueText=a.getMessage("data.dataLink.label.equalTemp")+o;c.filterType="6";c.isExclude="0"}else{if("dateSectionDiv"==v){var q=jQuery("#date_section_input_from").val();var k=jQuery("#date_section_input_to").val();c.whereValue=">="+q+",<="+k;c.whereText=q+","+k;c.trueText=q+","+k;c.filterType="6";c.isExclude="0"}else{if("timeDiv"==v){var f=jQuery("#time_input").val();c.whereValue=f;c.whereText=f;c.trueText=a.getMessage("data.dataLink.label.equalTemp")+f;c.filterType="7";c.isExclude="0"}else{if("timeSectionDiv"==v){var d=jQuery("#time_section_input_from").val();var r=jQuery("#time_section_input_to").val();c.whereValue=">="+d+",<="+r;c.whereText=d+","+r;c.trueText=d+","+r;c.filterType="7";c.isExclude="0"}}}}}}}}}}return c},changeSelect:function(g){var c=jQuery(g).attr("id")+"Div";var d=jQuery(".dataTabDiv");for(var f=0;f<d.length;f++){var e=jQuery(d[f]).attr("id");if(c==e){if(jQuery(d[f]).hasClass("dis-none")){jQuery(d[f]).removeClass("dis-none")}}else{if(!jQuery(d[f]).hasClass("dis-none")){jQuery(d[f]).addClass("dis-none")}}}},setfilterTextBg:function(c){jQuery(c).addClass("filterText-bg")}};b.view={initTabClick:function(d,e){var c="";if("modify"==e){b.module.initTabForModify(d)}else{if("1"==d){c="YYYY-MM";jQuery(".monthFilterDiv").removeClass("dis-none");jQuery("#monthDiv").removeClass("dis-none");jQuery("#month_input").datetimepicker({format:c,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});jQuery("#month_section_input_from").datetimepicker({format:c,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});jQuery("#month_section_input_to").datetimepicker({format:c,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});b.module.setfilterTextBg("#month");jQuery(".monthFilterDiv div").on("click",function(){b.module.changeBgColor(".monthFilterDiv",this);b.module.changeSelect(this)})}else{if("2"==d){c="YYYY-MM-DD";jQuery(".dateFilterDiv").removeClass("dis-none");jQuery("#dateDiv").removeClass("dis-none");jQuery("#date_input").datetimepicker({format:c,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});jQuery("#date_section_input_from").datetimepicker({format:c,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});jQuery("#date_section_input_to").datetimepicker({format:c,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});b.module.setfilterTextBg("#date");jQuery(".dateFilterDiv div").on("click",function(){b.module.changeBgColor(".dateFilterDiv",this);b.module.changeSelect(this)})}else{if("3"==d){c="YYYY-MM-DD HH:mm:ss";jQuery(".timeFilterDiv").removeClass("dis-none");jQuery("#timeDiv").removeClass("dis-none");jQuery("#time_input").datetimepicker({format:c,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});jQuery("#time_section_input_from").datetimepicker({format:c,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});jQuery("#time_section_input_to").datetimepicker({format:c,showClose:true,showClear:true,showTodayButton:true,keepOpen:true});b.module.setfilterTextBg("#time");jQuery(".timeFilterDiv div").on("click",function(){b.module.changeBgColor(".timeFilterDiv",this);b.module.changeSelect(this)})}else{if("8"==d){b.module.setfilterTextBg(".numberFilterDiv #interval");jQuery(".numberFilterDiv").removeClass("dis-none");jQuery("#intervalDiv").removeClass("dis-none");jQuery(".numberFilterDiv div").on("click",function(){b.module.changeBgColor(".numberFilterDiv",this);b.module.changeSelect(this)})}else{if("9"==d){b.module.setfilterTextBg(".headFilterDiv #interval");jQuery(".headFilterDiv").removeClass("dis-none");jQuery("#intervalDiv").removeClass("dis-none");jQuery(".headFilterDiv div").on("click",function(){b.module.changeBgColor(".headFilterDiv",this);b.module.changeSelect(this)})}}}}}}}};b.controller={init:function(c,d){jQuery(".chosen-select").chosen();jQuery('[data-toggle="radio"]').iCheck({checkboxClass:"icheckbox_minimal",radioClass:"iradio_minimal"});if("modify"==d){b.view.initTabClick(c,d)}else{b.view.initTabClick(c)}jQuery("#intervalForm").validationEngine({autoHidePrompt:true,autoHideDelay:2000,binded:true,promptPosition:"bottomLeft",showOneMessage:true});jQuery("#preciseForm").validationEngine({autoHidePrompt:true,autoHideDelay:2000,binded:true,promptPosition:"topLeft",showOneMessage:true});jQuery("#fuzzyForm").validationEngine({autoHidePrompt:true,autoHideDelay:2000,binded:true,promptPosition:"topLeft",showOneMessage:true});jQuery("#monthDiv").validationEngine({autoHidePrompt:true,autoHideDelay:2000,binded:true,promptPosition:"topLeft",showOneMessage:true});jQuery("#monthSectionForm").validationEngine({autoHidePrompt:true,autoHideDelay:2000,binded:true,promptPosition:"topLeft",showOneMessage:true});jQuery("#dateForm").validationEngine({autoHidePrompt:true,autoHideDelay:2000,binded:true,promptPosition:"topLeft",showOneMessage:true});jQuery("#dateSectionForm").validationEngine({autoHidePrompt:true,autoHideDelay:2000,binded:true,promptPosition:"topLeft",showOneMessage:true});jQuery("#timeForm").validationEngine({autoHidePrompt:true,autoHideDelay:2000,binded:true,promptPosition:"topLeft",showOneMessage:true});jQuery("#timeSectionForm").validationEngine({autoHidePrompt:true,autoHideDelay:2000,binded:true,promptPosition:"topLeft",showOneMessage:true})},getSelectQuery:function(){var c=jQuery(".filterText-bg");var e=jQuery(c).attr("id")+"Form";var d=jQuery("#"+e).validationEngine("validate");if(!d){return false}return b.module.getSelectData(c)},setModifyObj:function(c){b.module.paramObj=c},setModifyFlag:function(c){b.module.mFlag=c}};return b.controller});