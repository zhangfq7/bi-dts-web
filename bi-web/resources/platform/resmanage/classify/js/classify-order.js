define(["sabace"],function(d){var a={};var h;a.controller={init:function(){c()},saveOrder:function(){return e()}};function c(){b();g()}function e(){var j=[];jQuery("li.classifyList").each(function(){j.push($(this).attr("classifyId"))});if(h==j.join(",")){closeOrderDialog();return}var i={classifyId:j.join(",")};d.ajax({data:i,loading:{title:d.getMessage("classify.label.tip"),text:d.getMessage("classify.label.pleaseWait")},url:d.handleUrlParam("/platform/resmanage/classify/save-order-classify"),success:function(k){bi.dialog.show({title:"保存成功",message:k.responseText||"保存成功",buttons:[{label:"确定",cssClass:"btn-info",action:function(l){l.close();closeOrderDialog();jQuery("#claasifyListGrid").trigger("reloadGrid")}}]})},error:function(k){bi.dialog.show({type:bi.dialog.TYPE_DANGER,title:"保存失败",message:k.responseText||"保存失败"});return false}})}function g(){d.ajax({type:"post",cache:false,dataType:"json",url:d.handleUrlParam("/platform/resmanage/classify/classify-list"),data:{pageFlag:"0"},success:function(j){var i=j;f(i)},error:function(i){bi.dialog.show({type:bi.dialog.TYPE_DANGER,title:"查询失败",message:i.responseText||"查询失败"})}})}function f(l){var n=[];var k=[];for(var m=0;m<l.length;m++){var j=l[m].adminTime;j=j.substr(0,10);n.push(l[m].classifyId);k.push('<li class="classifyList" classifyId="'+l[m].classifyId+'"><span class="sortIcon"></span><span class="sortName">'+l[m].classifyName+'</span><span class="sortDesc">'+l[m].classifyDesc+'</span><span class="sortTime">'+j+'</span><span class="sortAdmin">'+l[m].createId+"</span></li>")}h=n.join(",");jQuery("#sortClassify").html(k.join(""))}function b(){$("#sortClassify").sortable({placeholder:"ui-state-highlight"});$("#sortClassify").disableSelection()}return a.controller});